# #######################################################################################
# 自动生成的 HYPRLAND 配置文件。
# 请根据官方维基的说明编辑此配置文件。
# #######################################################################################

#autogenerated = 1 # 删除此行以移除警告提示

# 这是一个 Hyprland 配置示例文件。
# 如需了解更多信息，请参考官方维基：
# https://wiki.hypr.land/Configuring/

# 请注意，并非所有可用的设置/选项都在此处列出。
# 完整的配置项列表请查阅上述维基链接

# 你可以将此配置拆分为多个文件管理
# 先单独创建配置文件，然后像这样将其引入主配置：
# source = ~/.config/hypr/myColors.conf

###############
# xwayland配置#
###############

xwayland{
    force_zero_scaling=true
}

################
### 显示器配置 ###
################

# 显示器配置说明请参考：https://wiki.hypr.land/Configuring/Monitors/
# 格式：monitor=显示器名称,分辨率/刷新率,位置,缩放比例
# 此处使用默认配置：自动识别首选显示器，自动位置，自动缩放
#monitor=,preferred,auto,1
monitor=eDP-2,1920x1080@144,auto,1.25
# 环境变量
# 语言
env = LANG,zh_CN.UTF-8
env = LC_MESSAGES,zh_CN.UTF-8
env = LC_TIME,zh_CN.UTF-8 
# 输入法
env = GTK_IM_MODULE,fcitx
env = QT_IM_MODULE,fcitx
env = XMODIFIERS,@im=fcitx
env = SDL_IM_MODULE,fcitx
env = FCITX_IM_MODULE,fcitx
###################
### 自定义程序 ###
###################

# 关键字配置说明请参考：https://wiki.hypr.land/Configuring/Keywords/

# 定义你常用的程序（后续快捷键可直接引用这些变量）
$terminal = alacritty        # 终端模拟器
$lafileManager = thunar     # 文件管理器
#################
### 自动启动 ###
#################

# 配置 Hyprland 启动时自动执行的进程（如通知守护进程、状态栏等）
# 也可以像下面这样添加你想要开机启动的应用：

# exec-once = $terminal          # 启动终端
exec-once = nm-applet &        # 启动网络管理小程序
exec-once = waybar # 启动状态栏
exec-once = swaybg -i /home/yiqiu/.config/1.png -m fill -c 000000   #壁纸程序
exec-once = fcitx5
exec-once = mako & copyq
exec-once = /usr/lib/hyprpolkitagent/hyprpolkitagent
#############################
### 环境变量配置 ###
#############################

# 环境变量配置说明请参考：https://wiki.hypr.land/Configuring/Environment-variables/

env = XCURSOR_SIZE,24      # X11 光标大小
env = HYPRCURSOR_SIZE,24   # Hyprland 原生光标大小


###################
### 权限配置 ###
###################

# 权限配置说明请参考：https://wiki.hypr.land/Configuring/Permissions/
# 注意：出于安全考虑，此处的权限修改需要重启 Hyprland 才能生效，无法实时应用

# 生态系统权限控制
# ecosystem {
#   enforce_permissions = 1  # 启用权限强制检查
# }

# 示例权限配置：
permission = /usr/(bin|local/bin)/grim, screencopy, allow  # 允许 grim 工具进行屏幕截图
permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow  # 允许门户程序进行屏幕截图
permission = /usr/(bin|local/bin)/hyprpm, plugin, allow  # 允许 hyprpm 管理插件


#####################
### 外观样式 ###
#####################

# 变量配置说明请参考：https://wiki.hypr.land/Configuring/Variables/

# 通用设置 https://wiki.hypr.land/Configuring/Variables/#general
general {
    gaps_in = 2          # 窗口之间的内部间距（像素）
    gaps_out = 5        # 窗口与屏幕边缘的外部间距（像素）

    border_size = 2      # 窗口边框宽度（像素）

    # 颜色配置说明：https://wiki.hypr.land/Configuring/Variables/#variable-types
    col.active_border = rgba(255,51,51,1.0) # 活动窗口边框（渐变，45度角）
    col.inactive_border = rgba(204,102,255,1.0) # 非活动窗口边框

    # 设置为 true 时，可通过点击并拖动窗口边框/间距来调整窗口大小
    resize_on_border = true

    # 启用前请阅读：https://wiki.hypr.land/Configuring/Tearing/（画面撕裂相关）
    allow_tearing = false

    layout = dwindle     # 默认窗口布局（dwindle 为平铺布局，另一个常用值是 master）
}

# 装饰设置 https://wiki.hypr.land/Configuring/Variables/#decoration
decoration {
    rounding = 10        # 窗口圆角半径（像素）
    rounding_power = 2   # 圆角平滑度（数值越大越平滑）

    # 窗口透明度（1.0 为完全不透明，0.0 为完全透明）
    active_opacity = 1.0    # 活动窗口透明度
    inactive_opacity = 0.9  # 非活动窗口透明度

    # 窗口阴影设置
    shadow {
        enabled = true       # 启用阴影
        range = 4            # 阴影范围（像素）
        render_power = 3     # 阴影渲染强度（数值越大越明显）
        color = rgba(1a1a1aee) # 阴影颜色
    }

    # 模糊效果设置 https://wiki.hypr.land/Configuring/Variables/#blur
    blur {
        enabled = true       # 启用模糊
        size = 3             # 模糊尺寸（像素）
        passes = 1           # 模糊迭代次数（次数越多效果越强，性能消耗越大）

        vibrancy = 0.1696    # 模糊鲜艳度（0-1 之间）
    }
}

# 动画设置 https://wiki.hypr.land/Configuring/Variables/#animations
animations {
    enabled = yes, please :)  # 启用动画（改为 no 可关闭所有动画）

    # 贝塞尔曲线（动画缓动效果），参考：https://wiki.hypr.land/Configuring/Animations/#curves
    #        曲线名称,        X0,   Y0,   X1,   Y1
    bezier = easeOutQuint,   0.23, 1,    0.32, 1    # 快速开始，缓慢结束
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1   # 慢进慢出
    bezier = linear,         0,    0,    1,    1    # 线性（匀速）
    bezier = almostLinear,   0.5,  0.5,  0.75, 1   # 接近线性
    bezier = quick,          0.15, 0,    0.1,  1    # 快速动画

    # 各类动画配置，参考：https://wiki.hypr.land/Configuring/Animations/
    #           动画名称,       开关,  速度,  缓动曲线,    [样式]
    animation = global,        1,     10,    default     # 全局动画
    animation = border,        1,     5.39,  easeOutQuint # 边框动画
    animation = windows,       1,     4.79,  easeOutQuint # 窗口基础动画
    animation = windowsIn,     1,     4.1,   easeOutQuint, popin 87% # 窗口进入动画（缩放弹出）
    animation = windowsOut,    1,     1.49,  linear,       popin 87% # 窗口退出动画
    animation = fadeIn,        1,     1.73,  almostLinear # 淡入动画
    animation = fadeOut,       1,     1.46,  almostLinear # 淡出动画
    animation = fade,          1,     3.03,  quick        # 通用淡入淡出
    animation = layers,        1,     3.81,  easeOutQuint # 图层动画
    animation = layersIn,      1,     4,     easeOutQuint, fade # 图层进入（淡入）
    animation = layersOut,     1,     1.5,   linear,       fade # 图层退出（淡出）
    animation = fadeLayersIn,  1,     1.79,  almostLinear # 图层淡入
    animation = fadeLayersOut, 1,     1.39,  almostLinear # 图层淡出
    animation = workspaces,    1,     1.94,  almostLinear, fade # 工作区切换动画
    animation = workspacesIn,  1,     1.21,  almostLinear, fade # 工作区进入
    animation = workspacesOut, 1,     1.94,  almostLinear, fade # 工作区退出
    animation = zoomFactor,    1,     7,     quick        # 缩放因子动画
}

# 工作区规则参考：https://wiki.hypr.land/Configuring/Workspace-Rules/
# “智能间距” / “单窗口时无间距”
# 如果需要启用，请取消以下所有行的注释。
# workspace = w[tv1], gapsout:0, gapsin:0  # tv1 工作区取消内外间距
# workspace = f[1], gapsout:0, gapsin:0   # f1 工作区取消内外间距
# windowrule = bordersize 0, floating:0, onworkspace:w[tv1] # tv1 工作区窗口边框设为0
# windowrule = rounding 0, floating:0, onworkspace:w[tv1]   # tv1 工作区窗口取消圆角
# windowrule = bordersize 0, floating:0, onworkspace:f[1]  # f1 工作区窗口边框设为0
# windowrule = rounding 0, floating:0, onworkspace:f[1]    # f1 工作区窗口取消圆角

# Dwindle 布局设置（平铺布局），更多参考：https://wiki.hypr.land/Configuring/Dwindle-Layout/
dwindle {
    pseudotile = true  # 伪平铺开关（启用后窗口可保留装饰），快捷键 mainMod + P 可切换
    preserve_split = true # 保留拆分布局（建议开启，切换窗口时保持布局结构）
}

# Master 布局设置（主窗口布局），更多参考：https://wiki.hypr.land/Configuring/Master-Layout/
master {
    new_status = master  # 新窗口默认作为主窗口
}

# 杂项设置 https://wiki.hypr.land/Configuring/Variables/#misc
misc {
    force_default_wallpaper = -1 # 强制默认壁纸：-1=自动，0/1=禁用动漫风格默认壁纸
    disable_hyprland_logo = false # 设为 true 会禁用随机的 Hyprland 标志/动漫少女壁纸 :(
}


#############
### 输入配置 ###
#############

# 输入设置参考：https://wiki.hypr.land/Configuring/Variables/#input
input {
    kb_layout = us       # 键盘布局（us=美式英文，cn=中文，可根据需要修改）
    kb_variant =         # 键盘变体（留空为默认）
    kb_model =           # 键盘型号（留空为默认）
    kb_options =         # 键盘选项（留空为默认）
    kb_rules =           # 键盘规则（留空为默认）

    follow_mouse = 1     # 鼠标跟随焦点：1=启用，0=禁用

    sensitivity = 0      # 鼠标灵敏度（范围 -1.0 ~ 1.0，0 为无修改）
        
}
#禁用触控板
#device{
#    name = "asuf1204:00-2808:0104-touchpad"
#    enabled = false
#}
exec-once = hyprctl keyword "device[asuf1204:00-2808:0104-touchpad]:enabled" false
# 触控板手势设置，参考：https://wiki.hypr.land/Configuring/Gestures
#gesture = 3, horizontal, workspace  # 三指水平滑动切换工作区

# 按设备自定义输入配置示例
# 更多参考：https://wiki.hypr.land/Configuring/Keywords/#per-device-input-configs
device {
    name = epic-mouse-v1    # 设备名称（可通过 hyprctl devices 查看）
    sensitivity = -0.5      # 该设备专属的鼠标灵敏度
}
###############
### 窗口规则###
###############

#alacritty
windowrulev2 = float,class:^(float-alacritty)$
windowrulev2 = size 800 600,class:^(float-alacritty)$  # 宽度800，高度600
windowrulev2 = center,class:^(float-alacritty)$        # 窗口居中显示
#copyq
windowrulev2 = float,class:com.github.hluk.copyq
###################
### 快捷键配置 ###
###################

# 快捷键配置参考：https://wiki.hypr.land/Configuring/Keywords/
$mainMod = SUPER # 主修饰键（SUPER=Windows/Super 键，也可设为 ALT/CONTROL）

#快捷键

#剪贴板
#bind = $mainMod SHIFT, V, exec, ~/.config/hypr/cliphist.sh
bind = $mainMod SHIFT, RETURN, exec, alacritty --class float-alacritty
bind = $mainMod, RETURN, exec, alacritty    # 打开终端
bind = $mainMod  SHIFT, Q, killactive       # 关闭活动窗口  
bind = $mainMod  SHIFT, E, exit             # 退出Hyprland 
bind = $mainMod, E, exec, thunar            # 打开文件管理器
bind = $mainMod, V, togglefloating,         # 切换窗口的浮动/平铺状态
bind = $mainMod, D, exec, rofi -show drun   # 打开应用启动器
bind = $mainMod, P, pseudo,                 # 切换伪平铺模式（仅 Dwindle 布局有效）
bind = $mainMod, J, togglesplit,            # 切换拆分模式（仅 Dwindle 布局有效）
bind = $mainMod SHIFT, L, exec, hyprlock
#配置重启hyprland
bind = $mainMod SHIFT, C, exec, ~/.config/hypr/reload.sh
#配置剪贴板
bind = $mainMod SHIFT, V, exec, copyq show
# 区域截图 + 编辑
#bind = $mainMod, M, exec, flameshot gui -r
bind = $mainMod, M, exec, ~/.config/hypr/grim.sh
# 全屏截图 + 保存 + 复制
bind = $mainMod SHIFT, M, exec, flameshot full -p ~/Pictures -c

# 主修饰键 + 方向键 移动窗口焦点

bind = $mainMod, left, movefocus, l        # 向左移动焦点
bind = $mainMod, right, movefocus, r       # 向右移动焦点
bind = $mainMod, up, movefocus, u          # 向上移动焦点
bind = $mainMod, down, movefocus, d        # 向下移动焦点
# 主修饰键 + SHIFT + 方向键 移动窗口
bind = $mainMod SHIFT, left, movewindow, l        # 向左移动焦点
bind = $mainMod SHIFT, right, movewindow, r       # 向右移动焦点
bind = $mainMod SHIFT, up, movewindow, u          # 向上移动焦点
bind = $mainMod SHIFT, down, movewindow, d        # 向下移动焦点

# 主修饰键 + 数字键 切换工作区
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# 主修饰键 + Shift + 数字键 将当前窗口移动到对应工作区
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# 特殊工作区（暂存区/Scratchpad）示例
bind = $mainMod, S, togglespecialworkspace, magic  # 显示/隐藏名为 magic 的特殊工作区
bind = $mainMod SHIFT, S, movetoworkspace, special:magic # 将当前窗口移到 magic 特殊工作区

# 主修饰键 + 鼠标滚轮 切换工作区
bind = $mainMod, mouse_down, workspace, e+1  # 滚轮向下=下一个工作区
bind = $mainMod, mouse_up, workspace, e-1    # 滚轮向上=上一个工作区

# 主修饰键 + 鼠标左键/右键 拖动窗口/调整窗口大小
bindm = $mainMod, mouse:272, movewindow   # 左键拖动移动窗口
bindm = $mainMod, mouse:273, resizewindow # 右键拖动调整窗口大小

# 笔记本多媒体按键（音量/亮度控制）
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+  # 音量增大5%
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-        # 音量减小5%
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle              # 切换扬声器静音
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle         # 切换麦克风静音
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+                     # 亮度增加5%
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-                   # 亮度减小5%

# 媒体播放控制（需要安装 playerctl）
bindl = , XF86AudioNext, exec, playerctl next          # 下一曲
bindl = , XF86AudioPause, exec, playerctl play-pause   # 暂停/播放
bindl = , XF86AudioPlay, exec, playerctl play-pause    # 暂停/播放
bindl = , XF86AudioPrev, exec, playerctl previous      # 上一曲

##############################
### 窗口与工作区规则 ###
##############################

# 窗口规则参考：https://wiki.hypr.land/Configuring/Window-Rules/
# 工作区规则参考：https://wiki.hypr.land/Configuring/Workspace-Rules/

# 窗口规则示例
# windowrule = float,class:^(kitty)$,title:^(kitty)$  # 将标题和类为 kitty 的窗口设为浮动

# 忽略所有应用的最大化请求（建议保留，避免窗口强制最大化）
windowrule = suppressevent maximize, class:.*

# 修复 XWayland 应用的拖拽问题
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
